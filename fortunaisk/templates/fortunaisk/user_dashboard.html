{% extends "base.html" %}
{% load i18n %}

{% block page_title %}
    {% trans "My Dashboard" %}
{% endblock page_title %}

{% block details %}
<div class="container mt-4">
    <h2 class="mb-4 text-center">{% trans "My Dashboard" %}</h2>

    <div class="row">
        <div class="col-md-6">
            <h3>{% trans "My Ticket Purchases" %}</h3>
            {% if ticket_purchases %}
                <div class="table-responsive">
                    <table class="table table-bordered table-striped">
                        <thead class="thead-dark">
                            <tr>
                                <th>{% trans "Lottery Reference" %}</th>
                                <th>{% trans "Character" %}</th>
                                <th>{% trans "Amount" %}</th>
                                <th>{% trans "Date" %}</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for purchase in ticket_purchases %}
                                <tr>
                                    <td>{{ purchase.lottery.lottery_reference }}</td>
                                    <td>{{ purchase.character.character_name }}</td>
                                    <td>{{ purchase.amount }} ISK</td>
                                    <td>{{ purchase.date|date:"Y-m-d H:i" }}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            {% else %}
                <div class="alert alert-info">
                    {% trans "You have not made any ticket purchases." %}
                </div>
            {% endif %}
        </div>

        <div class="col-md-6">
            <h3>{% trans "My Winnings" %}</h3>
            {% if winnings %}
                <div class="table-responsive">
                    <table class="table table-bordered table-striped">
                        <thead class="thead-dark">
                            <tr>
                                <th>{% trans "Lottery Reference" %}</th>
                                <th>{% trans "Character" %}</th>
                                <th>{% trans "Win Date" %}</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for win in winnings %}
                                <tr>
                                    <td>{{ win.ticket.lottery.lottery_reference }}</td>
                                    <td>{{ win.character.character_name }}</td>
                                    <td>{{ win.won_at|date:"Y-m-d H:i" }}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            {% else %}
                <div class="alert alert-info">
                    {% trans "You have not won any prizes." %}
                </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock details %}

{% block content %}
  <h1>{% trans "Loterie Actuelle" %}</h1>
  {% if message %}
    <p>{{ message }}</p>
  {% endif %}
  <!-- Contenu supplÃ©mentaire -->
{% endblock %}
